---
import { register } from '../../lib/auth';

let error = '';
const handleSubmit = async (e) => {
  e.preventDefault();
  const email = e.target.email.value;
  const password = e.target.password.value;

  try {
    await register(email, password);
    window.location.href = '/CelestiaCom/';
  } catch (err) {
    error = err.message;
  }
};
---

<form on:submit={handleSubmit}>
  <input type="email" name="email" placeholder="Correo electrónico" required>
  <input type="password" name="password" placeholder="Contraseña" required>
  <button type="submit">Registrarse</button>
</form>

<!-- CORRECCIÓN: Usa la sintaxis de Astro para condicionales -->
{error && <p class="error">{error}</p>}

<style>
  .error {
    color: red;
    margin-top: 1rem;
  }
  form {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    max-width: 400px;
    margin: 0 auto;
  }
</style>