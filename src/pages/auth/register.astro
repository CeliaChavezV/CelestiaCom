---
import { register } from '../../lib/auth';

let error = '';
const handleSubmit = (e) => {
  e.preventDefault();
  const formData = new FormData(e.target);
  const email = formData.get('email');
  const password = formData.get('password');

  try {
    register(email, password);
    // Redirección después de registro exitoso
    window.location.href = '/';
  } catch (err) {
    error = err.message;
  }
};
---

<form on:submit={handleSubmit}>
  <input type="email" name="email" placeholder="Correo electrónico" required>
  <input type="password" name="password" placeholder="Contraseña" required>
  <button type="submit">Registrarse</button>
</form>

{#if error}
  <p class="error">{error}</p>
{/if}

<style>
  .error { color: red; margin-top: 1rem; }
  form {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    max-width: 400px;
    margin: 0 auto;
  }
</style>